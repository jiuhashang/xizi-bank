{"remainingRequest":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\center\\share\\shareDetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\center\\share\\shareDetail\\index.vue","mtime":1645494517297},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js","mtime":1668673148088},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js","mtime":1668673148087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBnZXRTaGFyZUJhbmtMaXN0LCBnZXRCYW5rLCBzaGFyZUJhbmtQcm9qZWN0LCBkZWxldGVTaGFyZSwgZWRpdE9uZSB9IGZyb20gJ0AvYXBpL2ludGVncmF0ZWQnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdTaGFyZURldGFpbCcsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxpc3RJbmZvOiB7DQogICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkLA0KICAgICAgICBwYWdlSW5kZXg6IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMA0KICAgICAgfSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQoNCiAgICAgIGFkZERpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgYWRkVGFibGVEYXRhOiBbXSwNCiAgICAgIHRvdGFsOiAwLA0KICAgICAgc2hhcmVJbmZvOiB7DQogICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkLA0KICAgICAgICBzZUJhbmtVc2VyTGlzdDogW10sDQogICAgICAgIGRvd25GbGFnOiAwDQogICAgICB9LA0KDQogICAgICBzaGFyZURpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgY2hlY2tlZDogZmFsc2UsDQogICAgICBzaGFyZVF1ZXJ5OiB7DQogICAgICAgIHR5cGU6IDEsIA0KICAgICAgICBpZDogdW5kZWZpbmVkLA0KICAgICAgICBkb3duRmxhZzogdW5kZWZpbmVkDQogICAgICB9LA0KDQogICAgICBjdXJyZW50Um93OiB1bmRlZmluZWQsDQogICAgICBiYW5rTmFtZTogJycNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRTaGFyZUJhbmtMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFNoYXJlQmFua0xpc3QoKSB7DQogICAgICBnZXRTaGFyZUJhbmtMaXN0KHRoaXMubGlzdEluZm8pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlQWRkKCkgew0KICAgICAgdGhpcy5nZXRCYW5rKCkNCiAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGdldEN1cnJlbnRSb3cocm93KSB7DQogICAgICB0aGlzLmJhbmtOYW1lID0gcm93LmJhbmtOYW1lDQogICAgICB0aGlzLnNoYXJlSW5mby5zZUJhbmtVc2VyTGlzdC5wdXNoKHJvdykNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZUFkZEJhbmsoKSB7DQogICAgICBpZih0aGlzLnNoYXJlSW5mby5zZUJhbmtVc2VyTGlzdC5sZW5ndGggPCAxKSB7IHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeaCqOimgeWIhuS6q+eahOacuuaehCcpIH0NCiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKGDmmK/lkKblr7kgJHt0aGlzLmJhbmtOYW1lfSDmnLrmnoTov5vooYzliIbkuqs/YCwgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiBlcnIpDQogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpDQogICAgICB9DQogICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgc2hhcmVCYW5rUHJvamVjdCh0aGlzLnNoYXJlSW5mbykudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKQ0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVSZW1vdmUocm93KSB7DQogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybShg5piv5ZCm56e76ZmkICR7cm93LmJhbmtOYW1lfSDmnLrmnoQ/YCwgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiBlcnIpDQogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpDQogICAgICB9DQogICAgICBkZWxldGVTaGFyZSh7DQogICAgICAgIGlkOiByb3cuaWQsDQogICAgICAgIHByb2plY3RJZDogcm93LnByb2plY3RJZCwNCiAgICAgICAgdHlwZTogMA0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZykNCiAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVSZW1vdmVBbGwoKSB7DQogICAgICBpZih0aGlzLnRhYmxlRGF0YS5sZW5ndGggPCAxKSB7IHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+W9k+WJjeaaguaXoOWIhuS6q+aDheWGte+8jOivt+a3u+WKoOacuuaehCcpIH0NCiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKCfmmK/lkKblhajpg6jnp7vpmaTmnLrmnoQ/JywgJ+aPkOekuicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiBlcnIpDQogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpDQogICAgICB9DQogICAgICBkZWxldGVTaGFyZSh7DQogICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkLA0KICAgICAgICB0eXBlOiAxDQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZ2V0U2hhcmVCYW5rTGlzdCgpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZUV4dGVuZChyb3cpIHsNCiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKGDmmK/lkKblu7bplb8gJHtyb3cuYmFua05hbWV9IOacuuaehOeahOWIhuS6q+aXtumXtDE15aSpP2AsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkuY2F0Y2goKGVycikgPT4gZXJyKQ0KICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5pbmZvKCflt7Llj5bmtognKQ0KICAgICAgfQ0KICAgICAgZWRpdE9uZSh7DQogICAgICAgIHR5cGU6IDAsDQogICAgICAgIGlkOiByb3cuaWQNCiAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpDQogICAgICAgIHRoaXMuZ2V0U2hhcmVCYW5rTGlzdCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgaGFuZGxlUGVybWlzc2lvbihyb3cpIHsNCiAgICAgIHRoaXMuc2hhcmVEaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgdGhpcy5zaGFyZVF1ZXJ5LmlkID0gcm93LmlkDQogICAgICBpZiggcm93LmRvd25GbGFnID09IDAgKSB7IA0KICAgICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZSANCiAgICAgIH0gZWxzZSBpZiggcm93LmRvd25GbGFnID09IDEgKSB7DQogICAgICAgIHRoaXMuY2hlY2tlZCA9IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUFkZFNoYXJlKCkgew0KICAgICAgZWRpdE9uZSggdGhpcy5zaGFyZVF1ZXJ5ICkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnNoYXJlRGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSh2YWwpIHsNCiAgICAgIGlmKHZhbCkgew0KICAgICAgICB0aGlzLnNoYXJlUXVlcnkuZG93bkZsYWcgPSAxDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNoYXJlUXVlcnkuZG93bkZsYWcgPSAwDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVDbG9zZSgpIHsNCiAgICAgIHRoaXMuYWRkVGFibGVEYXRhID0gW10NCiAgICAgIHRoaXMuY3VycmVudFJvdyA9IHVuZGVmaW5lZA0KICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2UNCiAgICB9LA0KICAgIGdldEJhbmsoKSB7DQogICAgICBnZXRCYW5rKCB0aGlzLmxpc3RJbmZvICkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZFRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHMNCiAgICAgIH0pDQogICAgfSwNCg0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKQ0KICAgICAgdGhpcy5saXN0SW5mby5wYWdlU2l6ZSA9IHZhbA0KICAgICAgdGhpcy5nZXRCYW5rKCkNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQ0KICAgICAgdGhpcy5saXN0SW5mby5wYWdlSW5kZXggPSB2YWwNCiAgICAgIHRoaXMuZ2V0QmFuaygpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/center/share/shareDetail","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shang\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>审批中心</el-breadcrumb-item>\r\n        <el-breadcrumb-item>{{ $route.meta.title }}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div class=\"back\">\r\n        <div @click=\"$router.back()\" style=\"width: 240px\">\r\n          <h2>&lt; {{ $route.meta.title }}</h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-card>\r\n      <div class=\"xian\">\r\n        <div>项目信息</div>\r\n      </div>\r\n      <el-row :gutter=\"20\" style=\"margin: 30px\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">创建时间</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createTime}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createUserNickName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人电话</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createUserPhone}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" style=\"margin: 30px\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">项目名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.projectName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">公司名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.companyName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"xian\">\r\n        <div>分享情况</div>\r\n      </div>\r\n      <div style=\"margin-top: 15px;text-align:right;\">\r\n        <el-button size=\"small\" @click=\"handleRemoveAll\">全部移除</el-button>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"handleAdd\">添加机构</el-button>\r\n      </div>\r\n      <el-table :data=\"tableData\" style=\"width: 100%\" :header-cell-style=\"{background:'#f2f2f2',color:'#555'}\">\r\n        <el-table-column prop=\"bankName\" label=\"机构名称\" />\r\n        <el-table-column prop=\"expireTime\" label=\"分享自动失效时间\" />\r\n        <el-table-column label=\"分享状态\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.expireFlag == 0\">分享中</span>\r\n            <span v-else-if=\"scope.row.expireFlag == 1\">已失效</span>\r\n            <span v-else> - </span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"文件下载权限\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-show=\"scope.row.downFlag == 0\">未开通</span>\r\n            <span v-show=\"scope.row.downFlag == 1\">已开通</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"其他\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" @click=\"handlePermission(scope.row)\">权限管理</el-button>\r\n            <el-button type=\"text\" @click=\"handleExtend(scope.row)\">延长时间</el-button>\r\n            <el-button type=\"text\" style=\"color:red;\" @click=\"handleRemove(scope.row)\">移除分享</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <el-dialog\r\n      title=\"添加机构\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      @close=\"handleClose\"\r\n      width=\"40%\">\r\n       <el-table :data=\"addTableData\" style=\"width: 100%\" :header-cell-style=\"{background:'#f2f2f2',color:'#555'}\">\r\n         <el-table-column label=\"\" width=\"40\">\r\n          <template scope=\"scope\">\r\n            <el-radio\r\n              :label=\"scope.$index\"\r\n              v-model=\"currentRow\"\r\n              @change.native=\"getCurrentRow(scope.row)\"\r\n              style=\"color: #fff; padding-left: 10px; margin-right: -25px\"\r\n            ></el-radio>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"bankName\" label=\"机构名称\" />\r\n        <el-table-column prop=\"contactName\" label=\"联系人\" />\r\n      </el-table>\r\n      <c-pagination ref=\"pagination\" :total=\"total\" @sendsize=\"handleSizeChange\" @sendpage=\"handleCurrentChange\" />\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAddBank\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"分享权限\"\r\n      :visible.sync=\"shareDialogVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      width=\"30%\">\r\n      <div style=\"text-align: center;\">\r\n        <el-checkbox checked disabled style=\"padding-right:50px;\">查看</el-checkbox>\r\n        <el-checkbox v-model=\"checked\" @change=\"handleChange\">文件下载</el-checkbox>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"shareDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAddShare\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getShareBankList, getBank, shareBankProject, deleteShare, editOne } from '@/api/integrated'\r\nexport default {\r\n  name: 'ShareDetail',\r\n  data() {\r\n    return {\r\n      listInfo: {\r\n        projectId: this.$route.query.projectId,\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      tableData: [],\r\n\r\n      addDialogVisible: false,\r\n      addTableData: [],\r\n      total: 0,\r\n      shareInfo: {\r\n        projectId: this.$route.query.projectId,\r\n        seBankUserList: [],\r\n        downFlag: 0\r\n      },\r\n\r\n      shareDialogVisible: false,\r\n      checked: false,\r\n      shareQuery: {\r\n        type: 1, \r\n        id: undefined,\r\n        downFlag: undefined\r\n      },\r\n\r\n      currentRow: undefined,\r\n      bankName: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getShareBankList()\r\n  },\r\n  methods: {\r\n    getShareBankList() {\r\n      getShareBankList(this.listInfo).then(res => {\r\n        this.tableData = res.data.records\r\n      })\r\n    },\r\n    handleAdd() {\r\n      this.getBank()\r\n      this.addDialogVisible = true\r\n    },\r\n    getCurrentRow(row) {\r\n      this.bankName = row.bankName\r\n      this.shareInfo.seBankUserList.push(row)\r\n    },\r\n    async handleAddBank() {\r\n      if(this.shareInfo.seBankUserList.length < 1) { return this.$message.warning('请选择您要分享的机构') }\r\n      const confirmResult = await this.$confirm(`是否对 ${this.bankName} 机构进行分享?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      this.addDialogVisible = false\r\n      shareBankProject(this.shareInfo).then(res => {\r\n        console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      }).catch(err => {\r\n        this.addDialogVisible = false\r\n      })\r\n    },\r\n    async handleRemove(row) {\r\n      const confirmResult = await this.$confirm(`是否移除 ${row.bankName} 机构?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      deleteShare({\r\n        id: row.id,\r\n        projectId: row.projectId,\r\n        type: 0\r\n      }).then(res => {\r\n        this.getShareBankList()\r\n        this.$message.success(res.msg)\r\n      })\r\n    },\r\n    async handleRemoveAll() {\r\n      if(this.tableData.length < 1) { return this.$message.warning('当前暂无分享情况，请添加机构') }\r\n      const confirmResult = await this.$confirm('是否全部移除机构?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      deleteShare({\r\n        projectId: this.$route.query.projectId,\r\n        type: 1\r\n      }).then(res => {\r\n        this.getShareBankList()\r\n        this.$message.success(res.msg)\r\n      })\r\n    },\r\n    async handleExtend(row) {\r\n      const confirmResult = await this.$confirm(`是否延长 ${row.bankName} 机构的分享时间15天?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      editOne({\r\n        type: 0,\r\n        id: row.id\r\n      }).then(res => {\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      })\r\n    },\r\n    handlePermission(row) {\r\n      this.shareDialogVisible = true\r\n      this.shareQuery.id = row.id\r\n      if( row.downFlag == 0 ) { \r\n        this.checked = false \r\n      } else if( row.downFlag == 1 ) {\r\n        this.checked = true\r\n      }\r\n    },\r\n    handleAddShare() {\r\n      editOne( this.shareQuery ).then(res => {\r\n        this.shareDialogVisible = false\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      })\r\n    },\r\n    handleChange(val) {\r\n      if(val) {\r\n        this.shareQuery.downFlag = 1\r\n      } else {\r\n        this.shareQuery.downFlag = 0\r\n      }\r\n    },\r\n    handleClose() {\r\n      this.addTableData = []\r\n      this.currentRow = undefined\r\n      this.checked = false\r\n    },\r\n    getBank() {\r\n      getBank( this.listInfo ).then(res => {\r\n        this.addTableData = res.data.records\r\n      })\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`)\r\n      this.listInfo.pageSize = val\r\n      this.getBank()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.listInfo.pageIndex = val\r\n      this.getBank()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.shang {\r\n  height: 97px;\r\n  background-color: #fff;\r\n  .el-breadcrumb {\r\n    padding: 15px 0 0 25px;\r\n  }\r\n  .back {\r\n    position: relative;\r\n    .btnnn {\r\n      position: absolute;\r\n      bottom: 0;\r\n      right: 15px;\r\n    }\r\n  }\r\n  h2 {\r\n    padding-left: 25px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.xian {\r\n  color: #1890ff;\r\n  border-bottom: 1px solid #1890ff;\r\n  padding-bottom: 5px;\r\n  div {\r\n    border-left: 4px solid #1890ff;\r\n    padding-left: 15px;\r\n  }\r\n}\r\n.span13 {\r\n    font-size: 13px;\r\n    color: #aaa;\r\n    text-align: right;\r\n  }\r\n.span130 {\r\n  font-size: 13px;\r\n  color: #000;\r\n}\r\n</style>\r\n"]}]}