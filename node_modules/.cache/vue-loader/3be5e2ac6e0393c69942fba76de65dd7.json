{"remainingRequest":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\integrated\\role\\roleDetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\integrated\\role\\roleDetail\\index.vue","mtime":1645405844269},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js","mtime":1668673148088},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js","mtime":1668673148087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBnZXRSb2xlTGlzdCwgYWRkUm9sZSwgdXBkYXRlT25lIH0gZnJvbSAnQC9hcGkvaW50ZWdyYXRlZCcNCmNvbnN0IGRhdGFDb2xsZWN0aW9uMSA9IFsn6aG555uu5Y+R6LW3JywgJ+adkOaWmeihpeWFhScsICfnq4vpobnooaXlhYUnXQ0KY29uc3QgZGF0YUNvbGxlY3Rpb24yID0gWyfpobnnm67liJ3lrqEnLCAn5Zu+57q45aSN5qC4JywgJ+mhueebrue7iOWuoScsICfpobnnm67liIbkuqsnLCAn6aG555uu5oC76KeIJ10NCmNvbnN0IGRhdGFDb2xsZWN0aW9uMyA9IFsn6LSm5oi3566h55CGJywgJ+inkuiJsueuoeeQhicsJ+acuuaehOeuoeeQhicsICfkuIvovb3nrqHnkIYnXQ0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUm9sZURldGFpbCcsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFkZFJvbGVJbmZvOiB7DQogICAgICAgIGlkOiAnJywNCiAgICAgICAgcm9sZU5hbWU6ICcnLA0KICAgICAgICByb2xlVHlwZTogJycsDQogICAgICAgIHJlbWFyazogJycsDQogICAgICAgIG1lbnVJZDogJycNCiAgICAgIH0sDQogICAgICBtZW51OiBbXSwNCiAgICAgIA0KICAgICAgY2hlY2tBbGwxOiBmYWxzZSwNCiAgICAgIGNoZWNrZWRDaXRpZXMxOiBbXSwNCiAgICAgIGNpdGllczE6IGRhdGFDb2xsZWN0aW9uMSwNCiAgICAgIGlzSW5kZXRlcm1pbmF0ZTE6IHRydWUsDQoNCiAgICAgIGNoZWNrQWxsMjogZmFsc2UsDQogICAgICBjaGVja2VkQ2l0aWVzMjogW10sDQogICAgICBjaXRpZXMyOiBkYXRhQ29sbGVjdGlvbjIsDQogICAgICBpc0luZGV0ZXJtaW5hdGUyOiB0cnVlLA0KDQogICAgICBjaGVja0FsbDM6IGZhbHNlLA0KICAgICAgY2hlY2tlZENpdGllczM6IFtdLA0KICAgICAgY2l0aWVzMzogZGF0YUNvbGxlY3Rpb24zLA0KICAgICAgaXNJbmRldGVybWluYXRlMzogdHJ1ZSwNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkDQogICAgaWYoIHRoaXMuaWQgKSB7DQogICAgICB0aGlzLmdldFJvbGVMaXN0KCkNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRSb2xlTGlzdCgpIHsNCiAgICAgIGdldFJvbGVMaXN0KHsgaWQ6IHRoaXMuaWQgfSkudGhlbihyZXMgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgIGNvbnN0IHsgaWQsIHJvbGVOYW1lLCByb2xlVHlwZSwgcmVtYXJrLCBtZW51SWQgfSA9IHJlcy5kYXRhDQogICAgICAgIHRoaXMuYWRkUm9sZUluZm8uaWQgPSBpZA0KICAgICAgICB0aGlzLmFkZFJvbGVJbmZvLnJvbGVOYW1lID0gcm9sZU5hbWUNCiAgICAgICAgdGhpcy5hZGRSb2xlSW5mby5yb2xlVHlwZSA9IHJvbGVUeXBlDQogICAgICAgIHRoaXMuYWRkUm9sZUluZm8ucmVtYXJrID0gcmVtYXJrDQogICAgICAgIHRoaXMubWVudSA9IG1lbnVJZC5zcGxpdCgnLCcpDQogICAgICAgIHRoaXMubWVudS5mb3JFYWNoKG0gPT4gew0KICAgICAgICAgIGlmKHRoaXMuY2l0aWVzMS5pbmRleE9mKG0pPi0xKSB0aGlzLmNoZWNrZWRDaXRpZXMxLnB1c2gobSkNCiAgICAgICAgICBpZih0aGlzLmNpdGllczIuaW5kZXhPZihtKT4tMSkgdGhpcy5jaGVja2VkQ2l0aWVzMi5wdXNoKG0pDQogICAgICAgICAgaWYodGhpcy5jaXRpZXMzLmluZGV4T2YobSk+LTEpIHRoaXMuY2hlY2tlZENpdGllczMucHVzaChtKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNoZWNrQWxsQ2hhbmdlMSh2YWwpIHsNCiAgICAgIHRoaXMuY2hlY2tlZENpdGllczEgPSB2YWwgPyBkYXRhQ29sbGVjdGlvbjEgOiBbXQ0KICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUxID0gZmFsc2UNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hlY2tlZENpdGllczEpDQogICAgfSwNCiAgICBoYW5kbGVDaGVja2VkQ2l0aWVzQ2hhbmdlMSh2YWx1ZSkgew0KICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aA0KICAgICAgdGhpcy5jaGVja0FsbDEgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMS5sZW5ndGgNCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMSA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMxLmxlbmd0aA0KICAgIH0sDQoNCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZTIodmFsKSB7DQogICAgICB0aGlzLmNoZWNrZWRDaXRpZXMyID0gdmFsID8gZGF0YUNvbGxlY3Rpb24yIDogW10NCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMiA9IGZhbHNlDQogICAgfSwNCiAgICBoYW5kbGVDaGVja2VkQ2l0aWVzQ2hhbmdlMih2YWx1ZSkgew0KICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aA0KICAgICAgdGhpcy5jaGVja0FsbDIgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMi5sZW5ndGgNCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMiA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMyLmxlbmd0aA0KICAgIH0sDQoNCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZTModmFsKSB7DQogICAgICB0aGlzLmNoZWNrZWRDaXRpZXMzID0gdmFsID8gZGF0YUNvbGxlY3Rpb24zIDogW10NCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMyA9IGZhbHNlDQogICAgfSwNCiAgICBoYW5kbGVDaGVja2VkQ2l0aWVzQ2hhbmdlMyh2YWx1ZSkgew0KICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aA0KICAgICAgdGhpcy5jaGVja0FsbDMgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMy5sZW5ndGgNCiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMyA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMzLmxlbmd0aA0KICAgIH0sDQoNCiAgICBoYW5kbGVBZGRSb2xlKCkgeyAvLyDliJvlu7rop5LoibINCiAgICAgIHRoaXMuYWRkUm9sZUluZm8ubWVudUlkID0gWyAuLi50aGlzLmNoZWNrZWRDaXRpZXMxLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMyLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMzXS5qb2luKCcsJykNCiAgICAgIGFkZFJvbGUodGhpcy5hZGRSb2xlSW5mbykudGhlbihyZXMgPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKQ0KICAgICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpDQogICAgICB9KQ0KICAgIH0sDQoNCiAgICBoYW5kbGVTYXZlKCkgeyAvLyDnvJbovpHop5LoibINCiAgICAgIHRoaXMuYWRkUm9sZUluZm8ubWVudUlkID0gWyAuLi50aGlzLmNoZWNrZWRDaXRpZXMxLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMyLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMzXS5qb2luKCcsJykNCiAgICAgIHVwZGF0ZU9uZSh0aGlzLmFkZFJvbGVJbmZvKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpDQogICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCkNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/integrated/role/roleDetail","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shang\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>综合管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-if=\"id\">编辑角色</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-else>创建角色</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div class=\"back\">\r\n        <div @click=\"$router.back()\" style=\"width:240px;\">\r\n          <h2>&lt; 角色管理</h2>\r\n        </div>\r\n        <div class=\"btnnn\">\r\n          <el-button size=\"small\">取 消</el-button>\r\n          <el-button v-if=\"id\" size=\"small\" type=\"primary\" @click=\"handleSave\">保 存</el-button>\r\n          <el-button v-else size=\"small\" type=\"primary\" @click=\"handleAddRole\">创 建</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n     <el-card>\r\n        <h3>角色信息</h3>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"8\" style=\"text-align:right;margin-top:5px;\"><span style=\"color:red;\">*</span> 角色名称</el-col>\r\n              <el-col :span=\"16\">\r\n                <el-input v-model=\"addRoleInfo.roleName\" placeholder=\"请输入\"></el-input>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\" style=\"margin-top:10px;\">\r\n          <el-col :span=\"8\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"8\" style=\"text-align:right;margin-top:5px;\">备注</el-col>\r\n              <el-col :span=\"16\">\r\n                <el-input v-model=\"addRoleInfo.remark\" placeholder=\"请输入\"></el-input>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n        <h3>权限配置</h3>\r\n        <div style=\"margin-left:110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate1\" v-model=\"checkAll1\" @change=\"handleCheckAllChange1\">资料收集</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities1\" @change=\"handleCheckedCitiesChange1\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities1\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n        <div style=\"margin: 15px 0 0 110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate2\" v-model=\"checkAll2\" @change=\"handleCheckAllChange2\">审批中心</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities2\" @change=\"handleCheckedCitiesChange2\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities2\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div> \r\n        <div style=\"margin:15px 0 0 110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate3\" v-model=\"checkAll3\" @change=\"handleCheckAllChange3\">综合管理</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities3\" @change=\"handleCheckedCitiesChange3\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities3\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n      </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRoleList, addRole, updateOne } from '@/api/integrated'\r\nconst dataCollection1 = ['项目发起', '材料补充', '立项补充']\r\nconst dataCollection2 = ['项目初审', '图纸复核', '项目终审', '项目分享', '项目总览']\r\nconst dataCollection3 = ['账户管理', '角色管理','机构管理', '下载管理']\r\nexport default {\r\n  name: 'RoleDetail',\r\n  data() {\r\n    return {\r\n      addRoleInfo: {\r\n        id: '',\r\n        roleName: '',\r\n        roleType: '',\r\n        remark: '',\r\n        menuId: ''\r\n      },\r\n      menu: [],\r\n      \r\n      checkAll1: false,\r\n      checkedCities1: [],\r\n      cities1: dataCollection1,\r\n      isIndeterminate1: true,\r\n\r\n      checkAll2: false,\r\n      checkedCities2: [],\r\n      cities2: dataCollection2,\r\n      isIndeterminate2: true,\r\n\r\n      checkAll3: false,\r\n      checkedCities3: [],\r\n      cities3: dataCollection3,\r\n      isIndeterminate3: true,\r\n    }\r\n  },\r\n  created() {\r\n    this.id = this.$route.query.id\r\n    if( this.id ) {\r\n      this.getRoleList()\r\n    }\r\n  },\r\n  methods: {\r\n    getRoleList() {\r\n      getRoleList({ id: this.id }).then(res => {\r\n        console.log(res)\r\n        const { id, roleName, roleType, remark, menuId } = res.data\r\n        this.addRoleInfo.id = id\r\n        this.addRoleInfo.roleName = roleName\r\n        this.addRoleInfo.roleType = roleType\r\n        this.addRoleInfo.remark = remark\r\n        this.menu = menuId.split(',')\r\n        this.menu.forEach(m => {\r\n          if(this.cities1.indexOf(m)>-1) this.checkedCities1.push(m)\r\n          if(this.cities2.indexOf(m)>-1) this.checkedCities2.push(m)\r\n          if(this.cities3.indexOf(m)>-1) this.checkedCities3.push(m)\r\n        })\r\n      })\r\n    },\r\n    handleCheckAllChange1(val) {\r\n      this.checkedCities1 = val ? dataCollection1 : []\r\n      this.isIndeterminate1 = false\r\n      console.log(this.checkedCities1)\r\n    },\r\n    handleCheckedCitiesChange1(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll1 = checkedCount === this.cities1.length\r\n      this.isIndeterminate1 = checkedCount > 0 && checkedCount < this.cities1.length\r\n    },\r\n\r\n    handleCheckAllChange2(val) {\r\n      this.checkedCities2 = val ? dataCollection2 : []\r\n      this.isIndeterminate2 = false\r\n    },\r\n    handleCheckedCitiesChange2(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll2 = checkedCount === this.cities2.length\r\n      this.isIndeterminate2 = checkedCount > 0 && checkedCount < this.cities2.length\r\n    },\r\n\r\n    handleCheckAllChange3(val) {\r\n      this.checkedCities3 = val ? dataCollection3 : []\r\n      this.isIndeterminate3 = false\r\n    },\r\n    handleCheckedCitiesChange3(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll3 = checkedCount === this.cities3.length\r\n      this.isIndeterminate3 = checkedCount > 0 && checkedCount < this.cities3.length\r\n    },\r\n\r\n    handleAddRole() { // 创建角色\r\n      this.addRoleInfo.menuId = [ ...this.checkedCities1, ...this.checkedCities2, ...this.checkedCities3].join(',')\r\n      addRole(this.addRoleInfo).then(res => {\r\n        // console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.$router.back()\r\n      })\r\n    },\r\n\r\n    handleSave() { // 编辑角色\r\n      this.addRoleInfo.menuId = [ ...this.checkedCities1, ...this.checkedCities2, ...this.checkedCities3].join(',')\r\n      updateOne(this.addRoleInfo).then(res => {\r\n        console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.$router.back()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .shang {\r\n    height: 97px;\r\n    background-color: #fff;\r\n    .el-breadcrumb {\r\n      padding: 15px 0 0 25px;\r\n    }\r\n    .back {\r\n      position: relative;\r\n      .btnnn {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 15px;\r\n      }\r\n    }\r\n    h2 {\r\n      padding-left: 25px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n</style>"]}]}