{"remainingRequest":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\data\\added\\addedDetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\data\\added\\addedDetail\\index.vue","mtime":1645079271290},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\babel.config.js","mtime":1642644134550},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js","mtime":1668673148088},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js","mtime":1668673148087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0UHJvamVjdEluZm8sIGdldFByb2plY3RFeGFtaW5lTG9nLCBzZXRQcm9qZWN0SW5wdXQsIGdldEJ5Q29tcGFueU5hbWUgfSBmcm9tICdAL2FwaS9saXN0UHJvamVjdCc7CmltcG9ydCBBcHByb3ZhbExvZyBmcm9tICdAL2NvbXBvbmVudHMvTG9nL0FwcHJvdmFsTG9nLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWRkZWREZXRhaWwnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9qZWN0SWQ6ICcnLAogICAgICBsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgLy8g5a6h5om56K6w5b2VCiAgICAgIGFjdGl2aXRpZXM6IFtdLAogICAgICBzZVByb2plY3RDb21wYW55SW5mbzoge30sCiAgICAgIC8vIOS4muS4u+S/oeaBrwogICAgICBzZVByb2plY3RFbmRTdXBwbGVtZW50RmlsZTogewogICAgICAgIC8vIOeri+mhueihpeWFhQogICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQXBwcm92YWxMb2cKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnByb2plY3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2plY3RJZDsKICAgIHRoaXMuZ2V0UHJvamVjdEluZm8odGhpcy5wcm9qZWN0SWQpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvamVjdEluZm8ocHJvamVjdElkKSB7CiAgICAgIGdldFByb2plY3RJbmZvKHsKICAgICAgICBwcm9qZWN0SWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIHNlUHJvamVjdENvbXBhbnlJbmZvLAogICAgICAgICAgc2VQcm9qZWN0RW5kU3VwcGxlbWVudEZpbGUKICAgICAgICB9ID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5zZVByb2plY3RDb21wYW55SW5mbyA9IHNlUHJvamVjdENvbXBhbnlJbmZvOwogICAgICAgIHRoaXMuc2VQcm9qZWN0RW5kU3VwcGxlbWVudEZpbGUgPSB7CiAgICAgICAgICAuLi5zZVByb2plY3RFbmRTdXBwbGVtZW50RmlsZQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUlucHV0KCkgewogICAgICBnZXRCeUNvbXBhbnlOYW1lKHsKICAgICAgICBjb21wYW55TmFtZTogdGhpcy5zZVByb2plY3RFbmRTdXBwbGVtZW50RmlsZS5wcm9qZWN0Q29tcGFueU5hbWUKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMub3B0aW9ucyA9IHJlcy5kYXRhLm9yZGVyczsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0KGl0ZW0sIGluZGV4KSB7fSwKICAgIGhhbmRsZUNsZWFyKCkge30sCiAgICAvLyDlrqHmibnorrDlvZUKICAgIGFwcHJvdmFsKCkgewogICAgICBnZXRQcm9qZWN0RXhhbWluZUxvZyh7CiAgICAgICAgcHJvamVjdElkOiB0aGlzLnByb2plY3RJZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5hY3Rpdml0aWVzID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgICB0aGlzLmxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOS/neWtmAogICAgaGFuZGxlU2F2ZSgpIHsKICAgICAgdGhpcy5zZVByb2plY3RFbmRTdXBwbGVtZW50RmlsZS5wcm9qZWN0SWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5wcm9qZWN0SWQ7CiAgICAgIHNldFByb2plY3RJbnB1dCh0aGlzLnNlUHJvamVjdEVuZFN1cHBsZW1lbnRGaWxlKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgICB0aGlzLmdldFByb2plY3RJbmZvKHRoaXMucHJvamVjdElkKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AAmMA;AAEA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;QAAA;QACAJ;MACA;MACAK;IACA;EACA;EACAC;IAAAC;EAAA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACAA;QAAAV;MAAA;QACA;UAAAG;UAAAC;QAAA;QACA;QACA;UAAA;QAAA;MACA;IACA;IACAO;MACAC;QAAAC;MAAA;QACA;MACA;IACA;IACAC,2BAEA;IACAC;IACA;IACAC;MACAC;QAAAjB;MAAA;QACA;MACA;MACA;IACA;IACA;IACAkB;MACA;MACAC;QACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","projectId","logVisible","activities","seProjectCompanyInfo","seProjectEndSupplementFile","options","components","ApprovalLog","created","methods","getProjectInfo","handleInput","getByCompanyName","companyName","handleSelect","handleClear","approval","getProjectExamineLog","handleSave","setProjectInput"],"sourceRoot":"src/views/data/added/addedDetail","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shang\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>资料收集</el-breadcrumb-item>\r\n        <el-breadcrumb-item>{{ $route.meta.title }}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div class=\"back\">\r\n        <div @click=\"$router.back()\" style=\"width:240px;\">\r\n          <h2>&lt; {{ $route.meta.title }}</h2>\r\n        </div>\r\n        <div class=\"btnnn\">\r\n          <el-button size=\"small\" @click=\"approval\">审批记录</el-button>\r\n          <el-button size=\"small\" type=\"warning\" @click=\"handleSave\">保 存</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-card>\r\n      <div class=\"xian\">\r\n        <div>项目信息</div>\r\n      </div>\r\n      <el-row :gutter=\"20\" style=\"margin-top:30px;\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">创建时间</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ $route.query.createTime }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ $route.query.createUserNickName }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人电话</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ $route.query.createUserPhone }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" style=\"margin-top:30px;margin-bottom:30px;\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">项目名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ $route.query.projectName }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"xian\">\r\n        <div>业主信息</div>\r\n      </div>\r\n      <el-row :gutter=\"20\" style=\"margin-top:30px;\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">公司名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.companyName }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">统一社会信用代码</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.sameCreditCode }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">注册资本</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.registerMoney }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" style=\"margin-top:30px;\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">公司性质</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">\r\n              <span v-show=\"seProjectCompanyInfo.companyType == 0\">央企</span>\r\n                <span v-show=\"seProjectCompanyInfo.companyType == 1\">外资</span>\r\n                <span v-show=\"seProjectCompanyInfo.companyType == 2\">国企</span>\r\n                <span v-show=\"seProjectCompanyInfo.companyType == 3\">上市公司</span>\r\n                <span v-show=\"seProjectCompanyInfo.companyType == 4\">股份制</span>\r\n                <span v-show=\"seProjectCompanyInfo.companyType == 5\">其他</span>\r\n            </el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">建站地址</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{seProjectCompanyInfo.province}} {{seProjectCompanyInfo.city}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">详细地址</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.setAddress }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" style=\"margin-top:30px;margin-bottom:30px;\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">公司联系人</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.legalPerson }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">联系人手机号</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{ seProjectCompanyInfo.companyPhone }}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"xian\">\r\n        <div>立项补充</div>\r\n      </div>\r\n      <el-form ref=\"form\" :model=\"seProjectEndSupplementFile\" style=\"margin-left:60px;margin-top:30px;\" label-width=\"140px\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"能源管理合同\" class=\"must-form-item\">\r\n              <file-upload-string\r\n                v-model=\"seProjectEndSupplementFile.energyContractFile\"\r\n                :limit=\"1\"\r\n                accept=\".jpg,.jpeg,.png,.dwg,.bak,.dwt,.bak,.rar,.zip,.ppt,.pptx,.pdf,.xls,.xlsx,.csv,.xlsm\">\r\n              </file-upload-string>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\" style=\"padding-left:25px;\">\r\n            <el-form-item label=\"项目建议书\" class=\"must-form-item\">\r\n              <file-upload-string\r\n                v-model=\"seProjectEndSupplementFile.adviseBookFile\"\r\n                :limit=\"1\"\r\n                accept=\".jpg,.jpeg,.png,.dwg,.bak,.dwt,.bak,.rar,.zip,.ppt,.pptx,.pdf,.xls,.xlsx,.csv,.xlsm\">\r\n              </file-upload-string>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\" style=\"padding-left:48px;\">\r\n            <el-form-item label=\"备案文件\" class=\"must-form-item\">\r\n              <file-upload-string\r\n                v-model=\"seProjectEndSupplementFile.recordFile\"\r\n                :limit=\"1\"\r\n                accept=\".jpg,.jpeg,.png,.dwg,.bak,.dwt,.bak,.rar,.zip,.ppt,.pptx,.pdf,.xls,.xlsx,.csv,.xlsm\">\r\n              </file-upload-string>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"接入文件\" class=\"must-form-item\">\r\n              <file-upload-string\r\n                v-model=\"seProjectEndSupplementFile.insertFile\"\r\n                :limit=\"1\"\r\n                accept=\".jpg,.jpeg,.png,.dwg,.bak,.dwt,.bak,.rar,.zip,.ppt,.pptx,.pdf,.xls,.xlsx,.csv,.xlsm\">\r\n              </file-upload-string>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\" style=\"padding-left:25px;\">\r\n            <el-form-item label=\"营业执照\" class=\"must-form-item\">\r\n              <file-upload-string\r\n                v-model=\"seProjectEndSupplementFile.businessFile\"\r\n                :limit=\"1\"\r\n                accept=\".jpg,.jpeg,.png,.dwg,.bak,.dwt,.bak,.rar,.zip,.ppt,.pptx,.pdf,.xls,.xlsx,.csv,.xlsm\">\r\n              </file-upload-string>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\" style=\"padding-left:48px;\">\r\n            <el-form-item label=\"关联项目公司\" class=\"must-form-item\">\r\n              <el-input v-model=\"seProjectEndSupplementFile.projectCompanyName\" placeholder=\"请输入\" clearable @input=\"handleInput\" @clear=\"handleClear\" />\r\n            </el-form-item>\r\n            <div class=\"divul\" v-show=\"options.length\">\r\n              <ul style=\"list-style: none;\">\r\n                <li v-for=\"(item, index) in options\" :key=\"item.id\" class=\"divli\" @click=\"handleSelect(item, index)\">{{ item.name }}</li>\r\n              </ul>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\">\r\n          <el-col>\r\n            <el-form-item label=\"补充说明\">\r\n              <el-input v-model=\"seProjectEndSupplementFile.otherMessage\" class=\"width100\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <!-- 审批记录 -->\r\n      <ApprovalLog :logVisible.sync=\"logVisible\" :activities=\"activities\" />\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script> \r\nimport { getProjectInfo, getProjectExamineLog, setProjectInput, getByCompanyName } from '@/api/listProject'\r\n\r\nimport ApprovalLog from '@/components/Log/ApprovalLog.vue'\r\n\r\nexport default {\r\n  name: 'AddedDetail',\r\n  data() {\r\n    return {\r\n      projectId: '',\r\n      logVisible: false, // 审批记录\r\n      activities: [],\r\n      seProjectCompanyInfo: {}, // 业主信息\r\n      seProjectEndSupplementFile: { // 立项补充\r\n        projectId: this.$route.query.projectId\r\n      }, \r\n      options: [],\r\n    }\r\n  },\r\n  components: { ApprovalLog },\r\n  created() {\r\n    this.projectId = this.$route.query.projectId\r\n    this.getProjectInfo( this.projectId )\r\n  },\r\n  methods: {\r\n    getProjectInfo( projectId ) {\r\n      getProjectInfo({ projectId }).then(res => {\r\n        const { seProjectCompanyInfo, seProjectEndSupplementFile } = res.data\r\n        this.seProjectCompanyInfo = seProjectCompanyInfo\r\n        this.seProjectEndSupplementFile = { ...seProjectEndSupplementFile }\r\n      })\r\n    },\r\n    handleInput() {\r\n      getByCompanyName({ companyName: this.seProjectEndSupplementFile.projectCompanyName }).then(res => {\r\n        this.options = res.data.orders\r\n      })\r\n    },\r\n    handleSelect(item, index) {\r\n\r\n    },\r\n    handleClear() {},\r\n     // 审批记录\r\n    approval() {\r\n      getProjectExamineLog({ projectId: this.projectId }).then( res => {\r\n        this.activities = res.data\r\n      })\r\n      this.logVisible = true\r\n    },\r\n    // 保存\r\n    handleSave() {\r\n      this.seProjectEndSupplementFile.projectId = this.$route.query.projectId\r\n      setProjectInput( this.seProjectEndSupplementFile ).then(res => {\r\n        this.$message.success('保存成功')\r\n        this.getProjectInfo(this.projectId)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .shang {\r\n    height: 97px;\r\n    background-color: #fff;\r\n    .el-breadcrumb {\r\n      padding: 15px 0 0 25px;\r\n    }\r\n    .back {\r\n      position: relative;\r\n      .btnnn {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 15px;\r\n      }\r\n    }\r\n    h2 {\r\n      padding-left: 25px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  .xian {\r\n    color: #1890FF;\r\n    border-bottom: 1px solid #1890FF;\r\n    padding-bottom: 5px;\r\n    div {\r\n      border-left: 4px solid #1890FF;\r\n      padding-left: 15px;\r\n    }\r\n  }\r\n  .span13 {\r\n    font-size: 13px;\r\n    color: #aaa;\r\n    text-align: right;\r\n  }\r\n  .span130 {\r\n    font-size: 13px;\r\n    color: #000;\r\n  }\r\n  .custom-upload-files {\r\n    text-align: left;\r\n  }\r\n  .must-form-item {\r\n    /deep/ .el-form-item__label:before {\r\n      content: '*';\r\n      color: red;\r\n      margin-right: 4px;\r\n    }\r\n  }\r\n  .divul {\r\n    width: 300px;\r\n    height: 310px;\r\n    background-color: #fff;\r\n    position: absolute;\r\n    top: 170px;\r\n    left: 153px;\r\n    border:1px solid #DCDFE6;\r\n    border-radius: 5px;\r\n  }\r\n  .divli {\r\n    margin-bottom: 10px;\r\n  }\r\n</style>\r\n"]}]}