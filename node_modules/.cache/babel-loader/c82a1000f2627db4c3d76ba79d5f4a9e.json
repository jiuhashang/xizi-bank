{"remainingRequest":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\integrated\\role\\roleDetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\integrated\\role\\roleDetail\\index.vue","mtime":1645405844269},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\babel.config.js","mtime":1642644134550},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js","mtime":1668673148088},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js","mtime":1668673148087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGdldFJvbGVMaXN0LCBhZGRSb2xlLCB1cGRhdGVPbmUgfSBmcm9tICdAL2FwaS9pbnRlZ3JhdGVkJzsKY29uc3QgZGF0YUNvbGxlY3Rpb24xID0gWyfpobnnm67lj5HotbcnLCAn5p2Q5paZ6KGl5YWFJywgJ+eri+mhueihpeWFhSddOwpjb25zdCBkYXRhQ29sbGVjdGlvbjIgPSBbJ+mhueebruWIneWuoScsICflm77nurjlpI3moLgnLCAn6aG555uu57uI5a6hJywgJ+mhueebruWIhuS6qycsICfpobnnm67mgLvop4gnXTsKY29uc3QgZGF0YUNvbGxlY3Rpb24zID0gWyfotKbmiLfnrqHnkIYnLCAn6KeS6Imy566h55CGJywgJ+acuuaehOeuoeeQhicsICfkuIvovb3nrqHnkIYnXTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdSb2xlRGV0YWlsJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWRkUm9sZUluZm86IHsKICAgICAgICBpZDogJycsCiAgICAgICAgcm9sZU5hbWU6ICcnLAogICAgICAgIHJvbGVUeXBlOiAnJywKICAgICAgICByZW1hcms6ICcnLAogICAgICAgIG1lbnVJZDogJycKICAgICAgfSwKICAgICAgbWVudTogW10sCiAgICAgIGNoZWNrQWxsMTogZmFsc2UsCiAgICAgIGNoZWNrZWRDaXRpZXMxOiBbXSwKICAgICAgY2l0aWVzMTogZGF0YUNvbGxlY3Rpb24xLAogICAgICBpc0luZGV0ZXJtaW5hdGUxOiB0cnVlLAogICAgICBjaGVja0FsbDI6IGZhbHNlLAogICAgICBjaGVja2VkQ2l0aWVzMjogW10sCiAgICAgIGNpdGllczI6IGRhdGFDb2xsZWN0aW9uMiwKICAgICAgaXNJbmRldGVybWluYXRlMjogdHJ1ZSwKICAgICAgY2hlY2tBbGwzOiBmYWxzZSwKICAgICAgY2hlY2tlZENpdGllczM6IFtdLAogICAgICBjaXRpZXMzOiBkYXRhQ29sbGVjdGlvbjMsCiAgICAgIGlzSW5kZXRlcm1pbmF0ZTM6IHRydWUKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgaWYgKHRoaXMuaWQpIHsKICAgICAgdGhpcy5nZXRSb2xlTGlzdCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Um9sZUxpc3QoKSB7CiAgICAgIGdldFJvbGVMaXN0KHsKICAgICAgICBpZDogdGhpcy5pZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBpZCwKICAgICAgICAgIHJvbGVOYW1lLAogICAgICAgICAgcm9sZVR5cGUsCiAgICAgICAgICByZW1hcmssCiAgICAgICAgICBtZW51SWQKICAgICAgICB9ID0gcmVzLmRhdGE7CiAgICAgICAgdGhpcy5hZGRSb2xlSW5mby5pZCA9IGlkOwogICAgICAgIHRoaXMuYWRkUm9sZUluZm8ucm9sZU5hbWUgPSByb2xlTmFtZTsKICAgICAgICB0aGlzLmFkZFJvbGVJbmZvLnJvbGVUeXBlID0gcm9sZVR5cGU7CiAgICAgICAgdGhpcy5hZGRSb2xlSW5mby5yZW1hcmsgPSByZW1hcms7CiAgICAgICAgdGhpcy5tZW51ID0gbWVudUlkLnNwbGl0KCcsJyk7CiAgICAgICAgdGhpcy5tZW51LmZvckVhY2gobSA9PiB7CiAgICAgICAgICBpZiAodGhpcy5jaXRpZXMxLmluZGV4T2YobSkgPiAtMSkgdGhpcy5jaGVja2VkQ2l0aWVzMS5wdXNoKG0pOwogICAgICAgICAgaWYgKHRoaXMuY2l0aWVzMi5pbmRleE9mKG0pID4gLTEpIHRoaXMuY2hlY2tlZENpdGllczIucHVzaChtKTsKICAgICAgICAgIGlmICh0aGlzLmNpdGllczMuaW5kZXhPZihtKSA+IC0xKSB0aGlzLmNoZWNrZWRDaXRpZXMzLnB1c2gobSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNoZWNrQWxsQ2hhbmdlMSh2YWwpIHsKICAgICAgdGhpcy5jaGVja2VkQ2l0aWVzMSA9IHZhbCA/IGRhdGFDb2xsZWN0aW9uMSA6IFtdOwogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZTEgPSBmYWxzZTsKICAgICAgY29uc29sZS5sb2codGhpcy5jaGVja2VkQ2l0aWVzMSk7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tlZENpdGllc0NoYW5nZTEodmFsdWUpIHsKICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aDsKICAgICAgdGhpcy5jaGVja0FsbDEgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMS5sZW5ndGg7CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMSA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMxLmxlbmd0aDsKICAgIH0sCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZTIodmFsKSB7CiAgICAgIHRoaXMuY2hlY2tlZENpdGllczIgPSB2YWwgPyBkYXRhQ29sbGVjdGlvbjIgOiBbXTsKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUyID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tlZENpdGllc0NoYW5nZTIodmFsdWUpIHsKICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aDsKICAgICAgdGhpcy5jaGVja0FsbDIgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMi5sZW5ndGg7CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMiA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMyLmxlbmd0aDsKICAgIH0sCiAgICBoYW5kbGVDaGVja0FsbENoYW5nZTModmFsKSB7CiAgICAgIHRoaXMuY2hlY2tlZENpdGllczMgPSB2YWwgPyBkYXRhQ29sbGVjdGlvbjMgOiBbXTsKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUzID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tlZENpdGllc0NoYW5nZTModmFsdWUpIHsKICAgICAgbGV0IGNoZWNrZWRDb3VudCA9IHZhbHVlLmxlbmd0aDsKICAgICAgdGhpcy5jaGVja0FsbDMgPSBjaGVja2VkQ291bnQgPT09IHRoaXMuY2l0aWVzMy5sZW5ndGg7CiAgICAgIHRoaXMuaXNJbmRldGVybWluYXRlMyA9IGNoZWNrZWRDb3VudCA+IDAgJiYgY2hlY2tlZENvdW50IDwgdGhpcy5jaXRpZXMzLmxlbmd0aDsKICAgIH0sCiAgICBoYW5kbGVBZGRSb2xlKCkgewogICAgICAvLyDliJvlu7rop5LoibIKICAgICAgdGhpcy5hZGRSb2xlSW5mby5tZW51SWQgPSBbLi4udGhpcy5jaGVja2VkQ2l0aWVzMSwgLi4udGhpcy5jaGVja2VkQ2l0aWVzMiwgLi4udGhpcy5jaGVja2VkQ2l0aWVzM10uam9pbignLCcpOwogICAgICBhZGRSb2xlKHRoaXMuYWRkUm9sZUluZm8pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNhdmUoKSB7CiAgICAgIC8vIOe8lui+keinkuiJsgogICAgICB0aGlzLmFkZFJvbGVJbmZvLm1lbnVJZCA9IFsuLi50aGlzLmNoZWNrZWRDaXRpZXMxLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMyLCAuLi50aGlzLmNoZWNrZWRDaXRpZXMzXS5qb2luKCcsJyk7CiAgICAgIHVwZGF0ZU9uZSh0aGlzLmFkZFJvbGVJbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgdGhpcy4kcm91dGVyLmJhY2soKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AAqEA;AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAEAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACAA;QAAApB;MAAA;QACAqB;QACA;UAAArB;UAAAC;UAAAC;UAAAC;UAAAC;QAAA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IACAkB;MACA;MACA;MACAD;IACA;IACAE;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MAAA;MACA;MACAC;QACA;QACA;QACA;MACA;IACA;IAEAC;MAAA;MACA;MACAC;QACAV;QACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","addRoleInfo","id","roleName","roleType","remark","menuId","menu","checkAll1","checkedCities1","cities1","isIndeterminate1","checkAll2","checkedCities2","cities2","isIndeterminate2","checkAll3","checkedCities3","cities3","isIndeterminate3","created","methods","getRoleList","console","handleCheckAllChange1","handleCheckedCitiesChange1","handleCheckAllChange2","handleCheckedCitiesChange2","handleCheckAllChange3","handleCheckedCitiesChange3","handleAddRole","addRole","handleSave","updateOne"],"sourceRoot":"src/views/integrated/role/roleDetail","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shang\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>综合管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-if=\"id\">编辑角色</el-breadcrumb-item>\r\n        <el-breadcrumb-item v-else>创建角色</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div class=\"back\">\r\n        <div @click=\"$router.back()\" style=\"width:240px;\">\r\n          <h2>&lt; 角色管理</h2>\r\n        </div>\r\n        <div class=\"btnnn\">\r\n          <el-button size=\"small\">取 消</el-button>\r\n          <el-button v-if=\"id\" size=\"small\" type=\"primary\" @click=\"handleSave\">保 存</el-button>\r\n          <el-button v-else size=\"small\" type=\"primary\" @click=\"handleAddRole\">创 建</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n     <el-card>\r\n        <h3>角色信息</h3>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"8\" style=\"text-align:right;margin-top:5px;\"><span style=\"color:red;\">*</span> 角色名称</el-col>\r\n              <el-col :span=\"16\">\r\n                <el-input v-model=\"addRoleInfo.roleName\" placeholder=\"请输入\"></el-input>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row :gutter=\"20\" style=\"margin-top:10px;\">\r\n          <el-col :span=\"8\">\r\n            <el-row :gutter=\"20\">\r\n              <el-col :span=\"8\" style=\"text-align:right;margin-top:5px;\">备注</el-col>\r\n              <el-col :span=\"16\">\r\n                <el-input v-model=\"addRoleInfo.remark\" placeholder=\"请输入\"></el-input>\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n        </el-row>\r\n        <h3>权限配置</h3>\r\n        <div style=\"margin-left:110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate1\" v-model=\"checkAll1\" @change=\"handleCheckAllChange1\">资料收集</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities1\" @change=\"handleCheckedCitiesChange1\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities1\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n        <div style=\"margin: 15px 0 0 110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate2\" v-model=\"checkAll2\" @change=\"handleCheckAllChange2\">审批中心</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities2\" @change=\"handleCheckedCitiesChange2\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities2\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div> \r\n        <div style=\"margin:15px 0 0 110px;\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate3\" v-model=\"checkAll3\" @change=\"handleCheckAllChange3\">综合管理</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"checkedCities3\" @change=\"handleCheckedCitiesChange3\" style=\"margin-left:30px;\">\r\n            <el-checkbox v-for=\"city in cities3\" :label=\"city\" :key=\"city\">{{city}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </div>\r\n      </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRoleList, addRole, updateOne } from '@/api/integrated'\r\nconst dataCollection1 = ['项目发起', '材料补充', '立项补充']\r\nconst dataCollection2 = ['项目初审', '图纸复核', '项目终审', '项目分享', '项目总览']\r\nconst dataCollection3 = ['账户管理', '角色管理','机构管理', '下载管理']\r\nexport default {\r\n  name: 'RoleDetail',\r\n  data() {\r\n    return {\r\n      addRoleInfo: {\r\n        id: '',\r\n        roleName: '',\r\n        roleType: '',\r\n        remark: '',\r\n        menuId: ''\r\n      },\r\n      menu: [],\r\n      \r\n      checkAll1: false,\r\n      checkedCities1: [],\r\n      cities1: dataCollection1,\r\n      isIndeterminate1: true,\r\n\r\n      checkAll2: false,\r\n      checkedCities2: [],\r\n      cities2: dataCollection2,\r\n      isIndeterminate2: true,\r\n\r\n      checkAll3: false,\r\n      checkedCities3: [],\r\n      cities3: dataCollection3,\r\n      isIndeterminate3: true,\r\n    }\r\n  },\r\n  created() {\r\n    this.id = this.$route.query.id\r\n    if( this.id ) {\r\n      this.getRoleList()\r\n    }\r\n  },\r\n  methods: {\r\n    getRoleList() {\r\n      getRoleList({ id: this.id }).then(res => {\r\n        console.log(res)\r\n        const { id, roleName, roleType, remark, menuId } = res.data\r\n        this.addRoleInfo.id = id\r\n        this.addRoleInfo.roleName = roleName\r\n        this.addRoleInfo.roleType = roleType\r\n        this.addRoleInfo.remark = remark\r\n        this.menu = menuId.split(',')\r\n        this.menu.forEach(m => {\r\n          if(this.cities1.indexOf(m)>-1) this.checkedCities1.push(m)\r\n          if(this.cities2.indexOf(m)>-1) this.checkedCities2.push(m)\r\n          if(this.cities3.indexOf(m)>-1) this.checkedCities3.push(m)\r\n        })\r\n      })\r\n    },\r\n    handleCheckAllChange1(val) {\r\n      this.checkedCities1 = val ? dataCollection1 : []\r\n      this.isIndeterminate1 = false\r\n      console.log(this.checkedCities1)\r\n    },\r\n    handleCheckedCitiesChange1(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll1 = checkedCount === this.cities1.length\r\n      this.isIndeterminate1 = checkedCount > 0 && checkedCount < this.cities1.length\r\n    },\r\n\r\n    handleCheckAllChange2(val) {\r\n      this.checkedCities2 = val ? dataCollection2 : []\r\n      this.isIndeterminate2 = false\r\n    },\r\n    handleCheckedCitiesChange2(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll2 = checkedCount === this.cities2.length\r\n      this.isIndeterminate2 = checkedCount > 0 && checkedCount < this.cities2.length\r\n    },\r\n\r\n    handleCheckAllChange3(val) {\r\n      this.checkedCities3 = val ? dataCollection3 : []\r\n      this.isIndeterminate3 = false\r\n    },\r\n    handleCheckedCitiesChange3(value) {\r\n      let checkedCount = value.length\r\n      this.checkAll3 = checkedCount === this.cities3.length\r\n      this.isIndeterminate3 = checkedCount > 0 && checkedCount < this.cities3.length\r\n    },\r\n\r\n    handleAddRole() { // 创建角色\r\n      this.addRoleInfo.menuId = [ ...this.checkedCities1, ...this.checkedCities2, ...this.checkedCities3].join(',')\r\n      addRole(this.addRoleInfo).then(res => {\r\n        // console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.$router.back()\r\n      })\r\n    },\r\n\r\n    handleSave() { // 编辑角色\r\n      this.addRoleInfo.menuId = [ ...this.checkedCities1, ...this.checkedCities2, ...this.checkedCities3].join(',')\r\n      updateOne(this.addRoleInfo).then(res => {\r\n        console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.$router.back()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .shang {\r\n    height: 97px;\r\n    background-color: #fff;\r\n    .el-breadcrumb {\r\n      padding: 15px 0 0 25px;\r\n    }\r\n    .back {\r\n      position: relative;\r\n      .btnnn {\r\n        position: absolute;\r\n        bottom: 0;\r\n        right: 15px;\r\n      }\r\n    }\r\n    h2 {\r\n      padding-left: 25px;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n</style>"]}]}