{"remainingRequest":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\center\\share\\shareDetail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\src\\views\\center\\share\\shareDetail\\index.vue","mtime":1645494517297},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\babel.config.js","mtime":1642644134550},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\babel-loader\\lib\\index.js","mtime":1668673148088},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1668673146435},{"path":"C:\\Users\\ylf\\Desktop\\xizi - bank\\node_modules\\vue-loader\\lib\\index.js","mtime":1668673148087}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGdldFNoYXJlQmFua0xpc3QsIGdldEJhbmssIHNoYXJlQmFua1Byb2plY3QsIGRlbGV0ZVNoYXJlLCBlZGl0T25lIH0gZnJvbSAnQC9hcGkvaW50ZWdyYXRlZCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2hhcmVEZXRhaWwnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0SW5mbzogewogICAgICAgIHByb2plY3RJZDogdGhpcy4kcm91dGUucXVlcnkucHJvamVjdElkLAogICAgICAgIHBhZ2VJbmRleDogMSwKICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgfSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgYWRkRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGFkZFRhYmxlRGF0YTogW10sCiAgICAgIHRvdGFsOiAwLAogICAgICBzaGFyZUluZm86IHsKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2plY3RJZCwKICAgICAgICBzZUJhbmtVc2VyTGlzdDogW10sCiAgICAgICAgZG93bkZsYWc6IDAKICAgICAgfSwKICAgICAgc2hhcmVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgY2hlY2tlZDogZmFsc2UsCiAgICAgIHNoYXJlUXVlcnk6IHsKICAgICAgICB0eXBlOiAxLAogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgZG93bkZsYWc6IHVuZGVmaW5lZAogICAgICB9LAogICAgICBjdXJyZW50Um93OiB1bmRlZmluZWQsCiAgICAgIGJhbmtOYW1lOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFNoYXJlQmFua0xpc3QoKSB7CiAgICAgIGdldFNoYXJlQmFua0xpc3QodGhpcy5saXN0SW5mbykudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEucmVjb3JkczsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQWRkKCkgewogICAgICB0aGlzLmdldEJhbmsoKTsKICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRDdXJyZW50Um93KHJvdykgewogICAgICB0aGlzLmJhbmtOYW1lID0gcm93LmJhbmtOYW1lOwogICAgICB0aGlzLnNoYXJlSW5mby5zZUJhbmtVc2VyTGlzdC5wdXNoKHJvdyk7CiAgICB9LAogICAgYXN5bmMgaGFuZGxlQWRkQmFuaygpIHsKICAgICAgaWYgKHRoaXMuc2hhcmVJbmZvLnNlQmFua1VzZXJMaXN0Lmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nmgqjopoHliIbkuqvnmoTmnLrmnoQnKTsKICAgICAgfQogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybShg5piv5ZCm5a+5ICR7dGhpcy5iYW5rTmFtZX0g5py65p6E6L+b6KGM5YiG5LqrP2AsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKTsKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpOwogICAgICB9CiAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICBzaGFyZUJhbmtQcm9qZWN0KHRoaXMuc2hhcmVJbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgdGhpcy5nZXRTaGFyZUJhbmtMaXN0KCk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy5hZGREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZVJlbW92ZShyb3cpIHsKICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oYOaYr+WQpuenu+mZpCAke3Jvdy5iYW5rTmFtZX0g5py65p6EP2AsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKTsKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpOwogICAgICB9CiAgICAgIGRlbGV0ZVNoYXJlKHsKICAgICAgICBpZDogcm93LmlkLAogICAgICAgIHByb2plY3RJZDogcm93LnByb2plY3RJZCwKICAgICAgICB0eXBlOiAwCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZVJlbW92ZUFsbCgpIHsKICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflvZPliY3mmoLml6DliIbkuqvmg4XlhrXvvIzor7fmt7vliqDmnLrmnoQnKTsKICAgICAgfQogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgn5piv5ZCm5YWo6YOo56e76Zmk5py65p6EPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS5jYXRjaChlcnIgPT4gZXJyKTsKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iCcpOwogICAgICB9CiAgICAgIGRlbGV0ZVNoYXJlKHsKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2plY3RJZCwKICAgICAgICB0eXBlOiAxCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIGhhbmRsZUV4dGVuZChyb3cpIHsKICAgICAgY29uc3QgY29uZmlybVJlc3VsdCA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oYOaYr+WQpuW7tumVvyAke3Jvdy5iYW5rTmFtZX0g5py65p6E55qE5YiG5Lqr5pe26Ze0MTXlpKk/YCwgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLmNhdGNoKGVyciA9PiBlcnIpOwogICAgICBpZiAoY29uZmlybVJlc3VsdCAhPT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raIJyk7CiAgICAgIH0KICAgICAgZWRpdE9uZSh7CiAgICAgICAgdHlwZTogMCwKICAgICAgICBpZDogcm93LmlkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgdGhpcy5nZXRTaGFyZUJhbmtMaXN0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVBlcm1pc3Npb24ocm93KSB7CiAgICAgIHRoaXMuc2hhcmVEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zaGFyZVF1ZXJ5LmlkID0gcm93LmlkOwogICAgICBpZiAocm93LmRvd25GbGFnID09IDApIHsKICAgICAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgfSBlbHNlIGlmIChyb3cuZG93bkZsYWcgPT0gMSkgewogICAgICAgIHRoaXMuY2hlY2tlZCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVBZGRTaGFyZSgpIHsKICAgICAgZWRpdE9uZSh0aGlzLnNoYXJlUXVlcnkpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnNoYXJlRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICB0aGlzLmdldFNoYXJlQmFua0xpc3QoKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgdGhpcy5zaGFyZVF1ZXJ5LmRvd25GbGFnID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNoYXJlUXVlcnkuZG93bkZsYWcgPSAwOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuYWRkVGFibGVEYXRhID0gW107CiAgICAgIHRoaXMuY3VycmVudFJvdyA9IHVuZGVmaW5lZDsKICAgICAgdGhpcy5jaGVja2VkID0gZmFsc2U7CiAgICB9LAogICAgZ2V0QmFuaygpIHsKICAgICAgZ2V0QmFuayh0aGlzLmxpc3RJbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5hZGRUYWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKQogICAgICB0aGlzLmxpc3RJbmZvLnBhZ2VTaXplID0gdmFsOwogICAgICB0aGlzLmdldEJhbmsoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAvLyBjb25zb2xlLmxvZyhg5b2T5YmN6aG1OiAke3ZhbH1gKQogICAgICB0aGlzLmxpc3RJbmZvLnBhZ2VJbmRleCA9IHZhbDsKICAgICAgdGhpcy5nZXRCYW5rKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";AAiIA;AACA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAEAC;MACAC;MACAC;MACAC;QACAP;QACAQ;QACAC;MACA;MAEAC;MACAC;MACAC;QACAC;QACAC;QACAL;MACA;MAEAM;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACAA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;MACA;QAAA;MAAA;MACA;QACAC;QACAC;QACAV;MACA;MACA;QACA;MACA;MACA;MACAW;QACAC;QACA;QACA;MACA;QACA;MACA;IACA;IACA;MACA;QACAH;QACAC;QACAV;MACA;MACA;QACA;MACA;MACAa;QACAZ;QACAd;QACAa;MACA;QACA;QACA;MACA;IACA;IACA;MACA;QAAA;MAAA;MACA;QACAS;QACAC;QACAV;MACA;MACA;QACA;MACA;MACAa;QACA1B;QACAa;MACA;QACA;QACA;MACA;IACA;IACA;MACA;QACAS;QACAC;QACAV;MACA;MACA;QACA;MACA;MACAc;QACAd;QACAC;MACA;QACA;QACA;MACA;IACA;IACAc;MACA;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAF;QACA;QACA;QACA;MACA;IACA;IACAG;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACAA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;EACA;AACA","names":["name","data","listInfo","projectId","pageIndex","pageSize","tableData","addDialogVisible","addTableData","total","shareInfo","seBankUserList","downFlag","shareDialogVisible","checked","shareQuery","type","id","currentRow","bankName","created","methods","getShareBankList","handleAdd","getCurrentRow","confirmButtonText","cancelButtonText","shareBankProject","console","deleteShare","editOne","handlePermission","handleAddShare","handleChange","handleClose","getBank","handleSizeChange","handleCurrentChange"],"sourceRoot":"src/views/center/share/shareDetail","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"shang\">\r\n      <el-breadcrumb separator=\"/\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>审批中心</el-breadcrumb-item>\r\n        <el-breadcrumb-item>{{ $route.meta.title }}</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n      <div class=\"back\">\r\n        <div @click=\"$router.back()\" style=\"width: 240px\">\r\n          <h2>&lt; {{ $route.meta.title }}</h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-card>\r\n      <div class=\"xian\">\r\n        <div>项目信息</div>\r\n      </div>\r\n      <el-row :gutter=\"20\" style=\"margin: 30px\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">创建时间</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createTime}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createUserNickName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">负责人电话</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.createUserPhone}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row :gutter=\"20\" style=\"margin: 30px\">\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">项目名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.projectName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n        <el-col :span=\"8\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"8\" class=\"span13\">公司名称</el-col>\r\n            <el-col :span=\"16\" class=\"span130\">{{$route.query.companyName}}</el-col>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"xian\">\r\n        <div>分享情况</div>\r\n      </div>\r\n      <div style=\"margin-top: 15px;text-align:right;\">\r\n        <el-button size=\"small\" @click=\"handleRemoveAll\">全部移除</el-button>\r\n        <el-button type=\"primary\" size=\"small\" @click=\"handleAdd\">添加机构</el-button>\r\n      </div>\r\n      <el-table :data=\"tableData\" style=\"width: 100%\" :header-cell-style=\"{background:'#f2f2f2',color:'#555'}\">\r\n        <el-table-column prop=\"bankName\" label=\"机构名称\" />\r\n        <el-table-column prop=\"expireTime\" label=\"分享自动失效时间\" />\r\n        <el-table-column label=\"分享状态\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.expireFlag == 0\">分享中</span>\r\n            <span v-else-if=\"scope.row.expireFlag == 1\">已失效</span>\r\n            <span v-else> - </span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"文件下载权限\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-show=\"scope.row.downFlag == 0\">未开通</span>\r\n            <span v-show=\"scope.row.downFlag == 1\">已开通</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"其他\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" @click=\"handlePermission(scope.row)\">权限管理</el-button>\r\n            <el-button type=\"text\" @click=\"handleExtend(scope.row)\">延长时间</el-button>\r\n            <el-button type=\"text\" style=\"color:red;\" @click=\"handleRemove(scope.row)\">移除分享</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <el-dialog\r\n      title=\"添加机构\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      @close=\"handleClose\"\r\n      width=\"40%\">\r\n       <el-table :data=\"addTableData\" style=\"width: 100%\" :header-cell-style=\"{background:'#f2f2f2',color:'#555'}\">\r\n         <el-table-column label=\"\" width=\"40\">\r\n          <template scope=\"scope\">\r\n            <el-radio\r\n              :label=\"scope.$index\"\r\n              v-model=\"currentRow\"\r\n              @change.native=\"getCurrentRow(scope.row)\"\r\n              style=\"color: #fff; padding-left: 10px; margin-right: -25px\"\r\n            ></el-radio>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"bankName\" label=\"机构名称\" />\r\n        <el-table-column prop=\"contactName\" label=\"联系人\" />\r\n      </el-table>\r\n      <c-pagination ref=\"pagination\" :total=\"total\" @sendsize=\"handleSizeChange\" @sendpage=\"handleCurrentChange\" />\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAddBank\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog\r\n      title=\"分享权限\"\r\n      :visible.sync=\"shareDialogVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      width=\"30%\">\r\n      <div style=\"text-align: center;\">\r\n        <el-checkbox checked disabled style=\"padding-right:50px;\">查看</el-checkbox>\r\n        <el-checkbox v-model=\"checked\" @change=\"handleChange\">文件下载</el-checkbox>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"shareDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAddShare\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getShareBankList, getBank, shareBankProject, deleteShare, editOne } from '@/api/integrated'\r\nexport default {\r\n  name: 'ShareDetail',\r\n  data() {\r\n    return {\r\n      listInfo: {\r\n        projectId: this.$route.query.projectId,\r\n        pageIndex: 1,\r\n        pageSize: 10\r\n      },\r\n      tableData: [],\r\n\r\n      addDialogVisible: false,\r\n      addTableData: [],\r\n      total: 0,\r\n      shareInfo: {\r\n        projectId: this.$route.query.projectId,\r\n        seBankUserList: [],\r\n        downFlag: 0\r\n      },\r\n\r\n      shareDialogVisible: false,\r\n      checked: false,\r\n      shareQuery: {\r\n        type: 1, \r\n        id: undefined,\r\n        downFlag: undefined\r\n      },\r\n\r\n      currentRow: undefined,\r\n      bankName: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getShareBankList()\r\n  },\r\n  methods: {\r\n    getShareBankList() {\r\n      getShareBankList(this.listInfo).then(res => {\r\n        this.tableData = res.data.records\r\n      })\r\n    },\r\n    handleAdd() {\r\n      this.getBank()\r\n      this.addDialogVisible = true\r\n    },\r\n    getCurrentRow(row) {\r\n      this.bankName = row.bankName\r\n      this.shareInfo.seBankUserList.push(row)\r\n    },\r\n    async handleAddBank() {\r\n      if(this.shareInfo.seBankUserList.length < 1) { return this.$message.warning('请选择您要分享的机构') }\r\n      const confirmResult = await this.$confirm(`是否对 ${this.bankName} 机构进行分享?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      this.addDialogVisible = false\r\n      shareBankProject(this.shareInfo).then(res => {\r\n        console.log(res)\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      }).catch(err => {\r\n        this.addDialogVisible = false\r\n      })\r\n    },\r\n    async handleRemove(row) {\r\n      const confirmResult = await this.$confirm(`是否移除 ${row.bankName} 机构?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      deleteShare({\r\n        id: row.id,\r\n        projectId: row.projectId,\r\n        type: 0\r\n      }).then(res => {\r\n        this.getShareBankList()\r\n        this.$message.success(res.msg)\r\n      })\r\n    },\r\n    async handleRemoveAll() {\r\n      if(this.tableData.length < 1) { return this.$message.warning('当前暂无分享情况，请添加机构') }\r\n      const confirmResult = await this.$confirm('是否全部移除机构?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      deleteShare({\r\n        projectId: this.$route.query.projectId,\r\n        type: 1\r\n      }).then(res => {\r\n        this.getShareBankList()\r\n        this.$message.success(res.msg)\r\n      })\r\n    },\r\n    async handleExtend(row) {\r\n      const confirmResult = await this.$confirm(`是否延长 ${row.bankName} 机构的分享时间15天?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch((err) => err)\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消')\r\n      }\r\n      editOne({\r\n        type: 0,\r\n        id: row.id\r\n      }).then(res => {\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      })\r\n    },\r\n    handlePermission(row) {\r\n      this.shareDialogVisible = true\r\n      this.shareQuery.id = row.id\r\n      if( row.downFlag == 0 ) { \r\n        this.checked = false \r\n      } else if( row.downFlag == 1 ) {\r\n        this.checked = true\r\n      }\r\n    },\r\n    handleAddShare() {\r\n      editOne( this.shareQuery ).then(res => {\r\n        this.shareDialogVisible = false\r\n        this.$message.success(res.msg)\r\n        this.getShareBankList()\r\n      })\r\n    },\r\n    handleChange(val) {\r\n      if(val) {\r\n        this.shareQuery.downFlag = 1\r\n      } else {\r\n        this.shareQuery.downFlag = 0\r\n      }\r\n    },\r\n    handleClose() {\r\n      this.addTableData = []\r\n      this.currentRow = undefined\r\n      this.checked = false\r\n    },\r\n    getBank() {\r\n      getBank( this.listInfo ).then(res => {\r\n        this.addTableData = res.data.records\r\n      })\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      // console.log(`每页 ${val} 条`)\r\n      this.listInfo.pageSize = val\r\n      this.getBank()\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      this.listInfo.pageIndex = val\r\n      this.getBank()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.shang {\r\n  height: 97px;\r\n  background-color: #fff;\r\n  .el-breadcrumb {\r\n    padding: 15px 0 0 25px;\r\n  }\r\n  .back {\r\n    position: relative;\r\n    .btnnn {\r\n      position: absolute;\r\n      bottom: 0;\r\n      right: 15px;\r\n    }\r\n  }\r\n  h2 {\r\n    padding-left: 25px;\r\n    cursor: pointer;\r\n  }\r\n}\r\n\r\n.xian {\r\n  color: #1890ff;\r\n  border-bottom: 1px solid #1890ff;\r\n  padding-bottom: 5px;\r\n  div {\r\n    border-left: 4px solid #1890ff;\r\n    padding-left: 15px;\r\n  }\r\n}\r\n.span13 {\r\n    font-size: 13px;\r\n    color: #aaa;\r\n    text-align: right;\r\n  }\r\n.span130 {\r\n  font-size: 13px;\r\n  color: #000;\r\n}\r\n</style>\r\n"]}]}